name: Deploy dbt
on:
schedule:
- cron: '0 0 * * *'
workflow_dispatch:

jobs:
deploy:
runs-on: ubuntu-latest
steps:
- name: Checkout code
uses: actions/checkout@v2
- name: Set up Python
uses: actions/setup-python@v2
with:
python-version: 3.8
- name: Install dependencies
run: |
python -m pip install --upgrade pip
pip install dbt
- name: Run dbt
run: dbt run --profiles-dir . --project-dir .
env:
dbt_PROFILES_DIR: ${{ secrets.dbt_PROFILES_DIR }}